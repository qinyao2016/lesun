<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<style type="text/css">
		body, html,#allmap {width: 100%;height: 100%;overflow: hidden;margin:0;font-family:"微软雅黑";}
		#l-map{height:100%;width:78%;float:left;border-right:2px solid #bcbcbc;}
		#r-result{height:100%;width:20%;float:left;}
	</style>
	<script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=3Lc1WE5rykcTMMpaigQGDoG1V06fCDDp"></script>
	<title>周瑞-医院分布</title>
</head>
<body>
	<div id="allmap"></div>
</body>
</html>
<script type="text/javascript">

	var hos = '{"hos":[{"name":"四川仁爱医院","att":104.079971,"lat":30.677754},{"name":"四川省白内障专科医院","att":104.077731,"lat":30.648966},{"name":"四川省第五人民医院","att":104.062982,"lat":30.670707},{"name":"四川省红十字肿瘤医院","att":104.041021,"lat":30.65003},{"name":"四川省皮肤病性病防治研究所","att":104.061965,"lat":30.677404},{"name":"四川省西南联合泌尿肿瘤研究所附属医院","att":104.080061,"lat":30.675414},{"name":"武警四川消防总队医院/耳鼻喉科/胃肠诊疗中心","att":104.033986,"lat":30.677747},{"name":"西南联合皮肤病研究所一附院/成都万福医院","att":104.078931,"lat":30.683617},{"name":"铁道第二勘察设计院医院","att":104.063708,"lat":30.684997},{"name":"西南肝病研究院","att":104.059146,"lat":30.641625},{"name":"四川汉密尔顿美容医院","att":104.069843,"lat":30.6225},{"name":"四川军大医学研究所","att":104.085949,"lat":30.672704},{"name":"成都心血管病医院","att":104.06588,"lat":30.67605},{"name":"成都养和堂中医院","att":104.052959,"lat":30.668311},{"name":"成都银康银屑病医院","att":104.062625,"lat":30.656595},{"name":"成都中山骨科医院","att":104.067993,"lat":30.656333},{"name":"成都中医药大学第三附属医院","att":104.063643,"lat":30.660701},{"name":"四川国济甲亢病医院","att":104.010743,"lat":30.673941},{"name":"成都联大中西医结合医院/西南痛风风湿医院","att":104.047681,"lat":30.671513},{"name":"成都市妇幼保健院","att":104.059165,"lat":30.673239},{"name":"成都市华协医院/成都金牛真爱医院","att":104.0527,"lat":30.670941},{"name":"成都市麦格眼科医院/第一骨科医院","att":104.065573,"lat":30.673624},{"name":"青羊区草堂社区卫生服务中心","att":104.053177,"lat":30.661786},{"name":"青羊区第八人民医院/成都胃病医院","att":104.039011,"lat":30.676457},{"name":"青羊区第二人民医院/青羊圣贝医院","att":104.082962,"lat":30.676284},{"name":"青羊区第九人民医院","att":103.989154,"lat":30.675198},{"name":"青羊区第六人民医院/青羊区中医药","att":104.024795,"lat":30.6687},{"name":"青羊区第七人民医院/维美时尚医学美容","att":104.052694,"lat":30.670927},{"name":"青羊区第十人民医院/文家乡七里沟村卫生站","att":103.945403,"lat":30.674344},{"name":"青羊区第五人民医院","att":104.035547,"lat":30.671551},{"name":"青羊区妇幼保健院","att":104.086629,"lat":30.676347}]}'
	
	var mydata = JSON.parse(hos);	
	var length = mydata["hos"].length;
	
	// 百度地图API功能
	var map = new BMap.Map("allmap");
	var point = new BMap.Point(104.058327, 30.664539);
	map.centerAndZoom(point, 15);
	// 编写自定义函数,创建标注
	function addMarker(point, label){
	  var marker = new BMap.Marker(point);
	  map.addOverlay(marker);
	  marker.setLabel(label);
	}
	
	
	// 随机向地图添加25个标注
	for (var i = 0; i < length; i ++) {
		var hospotial = mydata["hos"][i];
		var point = new BMap.Point(hospotial["att"], hospotial["lat"]);
		var opts = {
		  position : point,    // 指定文本标注所在的地理位置
		  offset   : new BMap.Size(10, -10)    //设置文本偏移量
		}
		var label = new BMap.Label(hospotial["name"], opts);
		label.setStyle({
			 color : "red",
			 fontSize : "8px",
			 height : "9px",
			 lineHeight : "8px",
			 fontFamily:"微软雅黑"
		 });
		addMarker(point, label);
	}
</script>
